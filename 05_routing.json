// Настройка маршрутизации
{
  "routing": {
    "rules": [
      // VLESS
      // for testing
      {
        "inboundTag": [
          "redirect",
          "tproxy"
        ],
        "domain": [
          "2ip"
        ],
        "outboundTag": "vless-reality",
        "type": "field"
      },
      // youtube
      {
        "inboundTag": [
          "redirect",
          "tproxy"
        ],
        "domain": [
          "youtube",
          "youtu.be",
          "yt.be",
          "googlevideo.com",
          "ytimg.com",
          "ggpht.com",
          "gvt1.com",
          "youtube-nocookie.com",
          "youtube-ui.l.google.com",
          "youtubeembeddedplayer.googleapis.com",
          "youtube.googleapis.com",
          "youtubei.googleapis.com",
          "yt-video-upload.l.google.com",
          "wide-youtube.l.google.com"
        ],
        "outboundTag": "vless-reality",
        "type": "field"
      },
      //instagram
      {
        "inboundTag": [
          "redirect",
          "tproxy"
        ],
        "domain": [
          "ext:geosite_v2fly.dat:instagram"
        ],
        "outboundTag": "vless-reality",
        "type": "field"
      },
      //torrents
      {
        "inboundTag": [
          "redirect",
          "tproxy"
        ],
        "domain": [
          "kinozal",
          "rutracker",
          "rutrk",
          "nnmclub",
          "cloudflare-ech",
          "cloudflare"
        ],
        "outboundTag": "vless-reality",
        "type": "field"
      },
      //DIRECT
      //bittorent direct
      {
        "inboundTag": [
          "redirect",
          "tproxy"
        ],
        "outboundTag": "direct",
        "type": "field",
        "protocol": [
          "bittorrent"
        ]
      },
      // everything else
      {
        "inboundTag": [
          "redirect",
          "tproxy"
        ],
        "outboundTag": "direct",
        "type": "field"
      }
    ]
  }
}